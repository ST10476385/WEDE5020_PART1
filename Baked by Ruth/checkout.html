<!--
  checkout.html
  Checkout page for Baked by Ruth.
  Lets users review their cart and enter payment/delivery details.
  Comments throughout explain the structure and purpose of each section for educational clarity.
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <!--
    Head section: Sets up page metadata and links to the main stylesheet.
    Contains embedded styles and JavaScript for the checkout process.
  -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout | Baked by Ruth</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    .checkout-container { max-width: 420px; margin: 3rem auto; background: #fff; border-radius: 1rem; box-shadow: 0 2px 12px rgba(0,0,0,0.07); padding: 2rem; }
    .checkout-title { color: #b45309; font-size: 2rem; font-weight: 700; margin-bottom: 1.5rem; text-align: center; }
    .checkout-form label { display: block; margin-bottom: 0.5rem; color: #78350f; font-weight: 600; }
    .checkout-form input, .checkout-form select { width: 100%; padding: 0.5rem; margin-bottom: 1.2rem; border-radius: 0.5rem; border: 1px solid #e5e7eb; }
    .checkout-summary { background: #fff7e6; border-radius: 0.5rem; padding: 1rem; margin-bottom: 1.5rem; }
    .pay-btn { background: #b45309; color: #fff; border: none; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-size: 1.1rem; cursor: pointer; width: 100%; font-weight: 600; }
    .pay-btn:active { background: #78350f; }
    .demo-note { color: #b45309; font-size: 0.95rem; text-align: center; margin-top: 1.5rem; }
    .success-message { color: #388e3c; font-size: 1.1rem; text-align: center; margin-top: 1.5rem; display: none; }
  </style>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Demo: Load cart summary from localStorage
      const cart = JSON.parse(localStorage.getItem('cart') || '{}');
      let total = 0;
      let summary = '';
        if (cart && Array.isArray(cart) && cart.length > 0) {
          for (const item of cart) {
            summary += `<div style='margin-bottom:0.5rem;'>${item.name} x ${item.qty} <span style='float:right;'>R${item.price * item.qty}</span></div>`;
            total += item.price * item.qty;
          }
        }
      if (summary) {
        document.getElementById('checkout-summary').innerHTML = summary + `<hr style='margin:0.7rem 0;'><div style='font-weight:700;'>Total <span style='float:right;'>R${total}</span></div>`;
      } else {
        document.getElementById('checkout-summary').innerHTML = '<em>Your cart is empty.</em>';
        document.getElementById('checkout-form').style.display = 'none';
      }
      // Demo payment handler
      document.getElementById('pay-btn').onclick = function(e) {
        e.preventDefault();
        document.getElementById('success-message').style.display = 'block';
        setTimeout(function() {
          // Clear the cart so a new customer can order
          localStorage.removeItem('cart');
          // If the cart icon exists on products.html, update it after redirect
          window.location.href = 'products.html';
        }, 2500);
      };
    });
  </script>
</head>
<body style="background:#fff7e6;">
  <!--
    Main Content: Contains the checkout form, cart summary, and payment logic.
    Uses a centered container for layout.
  -->
  <div class="checkout-container">
    <div class="checkout-title">Checkout</div>
    <div id="checkout-summary" class="checkout-summary"></div>
    <form id="checkout-form" class="checkout-form">
      <!--
        Checkout Form: Collects user details and payment method.
      -->
      <label for="name">Full Name</label>
      <input type="text" id="name" name="name" required>
      <label for="email">Email Address</label>
      <input type="email" id="email" name="email" required>
      <label for="address">Delivery Address</label>
      <input type="text" id="address" name="address" required>
      <label for="payment">Payment Method</label>
      <select id="payment" name="payment" required>
        <option value="card">Credit/Debit Card</option>
        <option value="eft">EFT (Demo)</option>
        <option value="cash">Cash on Delivery</option>
      </select>
      <button id="pay-btn" class="pay-btn" type="submit">Pay Now (Demo)</button>
    </form>
    <div class="success-message" id="success-message">Thank you! Your order has been placed (demo). Redirecting...</div>
    <!--
      Success Message: Shown after successful payment (demo only).
    -->
    <div class="demo-note">This is a demo payment page. No real payment will be processed.</div>
  </div>
</body>
</html>
